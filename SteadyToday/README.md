# 꾸준한오늘 (SteadyToday)

만다라트(연간 목표 → 카테고리 → 액션) 기반으로 루틴을 설계하고, **매일 액션 체크 + 오늘의 도전 기록**을 쌓는 iOS 앱.

## App Copy (스토어/랜딩 문구)

- **슬로건**: 하루가 모여 나를 만든다 — 그래서 오늘은 **‘액션’**부터
- **소개**
  - 꾸준한오늘은 목표를 **“액션”**으로 바꾸는 앱이에요.
  - 만다라트로 연간 목표를 카테고리와 액션으로 쪼개고, 오늘은 그 액션을 **체크만** 하면 됩니다.
  - 하루의 액션이 쌓이면, 어느새 목표에 도착해요. (진짜로요.)

## App Store 설명글 (Plain Text)

하루가 모여 나를 만든다 — 그래서 오늘은 ‘액션’부터

꾸준한오늘은 목표를 ‘액션’으로 바꾸는 루틴 앱입니다.
만다라트로 연간 목표를 카테고리와 액션으로 쪼개고, 오늘은 그 액션을 체크만 하면 됩니다.
복잡한 통계보다 “오늘 한 번의 실행”에 집중해요.

[주요 기능]

- 만다라트 기반 목표 설계: 연간 목표(연도별 1개) → 카테고리(최대 8) → 액션(각 최대 8)
- 액션 3가지 타입
  - 주 N회(위클리): 요일 제한 없이 이번 주에 N번만 체크
  - 요일 반복(데일리): 월~일 원하는 요일을 선택해 반복 체크
  - 오늘의 도전(누적 시간 기록): 매일 N시간 목표, 타이머 방식으로만 기록
- 오늘 화면에서 바로 체크: 미기록 ↔ 성공 토글 (다시 누르면 취소)
- 오늘의 도전 액션: 타이머 모드(시작/종료)로만 기록, 하루에 하나의 액션만 존재
- 기록(History): 캘린더 뷰 + 날짜별 상세 기록 로그 (데일리/위클리/오늘의 도전 구분)

[이런 분께 추천해요]

- 목표를 세우지만 실행이 어려운 분
- "오늘 할 일"로 잘게 쪼개서 꾸준히 해보고 싶은 분
- 루틴 체크와 오늘의 도전 목표를 한 곳에서 관리하고 싶은 분

오늘의 액션이 쌓이면, 어느새 목표에 도착해요. (진짜로요.)

## 핵심 컨셉

- **연간 목표(Year Goal)**: 연도별 1개
- **카테고리(Category)**: 최대 8개 (색상으로 구분)
- **액션(Action)**: 카테고리별 최대 8개
- **액션 타입 3가지**
  - **주 N회(위클리)**: 요일 제한 없음, 월요일 시작 주 기준으로 "주 N회 성공"을 기록
  - **요일 반복(데일리)**: 월~일 복수 선택, 선택된 요일에만 "오늘 할 일"로 노출
  - **오늘의 도전(누적 시간 기록)**: 매일 N시간 목표, 타이머 방식으로만 기록
- **체크 UX(액션)**: **성공/미기록 토글만**
  - 기본=미기록(회색, 탭 가능)
  - 1회 탭=성공 기록
  - 다시 탭=기록 취소(미기록)
- **오늘의 도전(Time-based)**
  - 매일 N시간 목표, 반복 요일은 사용자가 선택 가능 (월~일 중 선택)
  - 기록 방식: 타이머만 사용 (수동 입력 제거)
  - 하루에 하나의 액션만 존재 (시작 전 / 진행 중 / 완료)
  - 시작 날짜와 종료 날짜를 기준으로 관리
  - 어제 시작한 진행 중인 세션이 있으면 오늘에도 표시됨
  - 종료 처리 시 시작 날짜 기준으로 기록 (완료율 집계도 시작 날짜 기준)

## MVP 화면 구성(심플 iOS 스타일)

Tab 3개:

- **Today(오늘)**: 오늘 해야 할 액션 체크 + 오늘의 도전 액션 관리
- **Mandalart(만다라트)**: 연간 목표/카테고리/액션 생성 및 관리
- **History(기록)**: 캘린더 뷰 + 날짜별 상세 기록 로그

> “성공률 대시보드(월간 %)”는 MVP에서 제외(추후 고도화).

## 주요 동작(요약)

### Today

- **오늘의 도전** 섹션: 가로 스크롤 카드 형태로 표시 (가장 상단에 위치)
  - 시작 전: 00:00:00 표시, 시작 버튼
  - 진행 중: 실시간 타이머 표시, 종료 버튼 (어제 시작한 진행 중인 세션도 오늘 표시)
  - 완료: 완료 시간 + 목표 시간 표시, 성공/완료 배지 (시작 날짜 기준으로 집계)
- **이번 주 목표** 섹션: 위클리(주 N회) 액션들, 체크 시 오늘 날짜로 1회 성공 기록, 이번 주 진행도 `x/N` 표시
- **오늘의 액션** 섹션: 데일리(요일 반복) 액션들, 오늘 요일에 해당하는 액션만 노출
- **정렬**: 액션 순서는 전역 `todayOrder`로 관리되며, 현재는 Edit 모드 UI는 구현되지 않음 (추후 추가 예정)

### Mandalart

- 연간 목표 텍스트 수정
- 카테고리 생성 및 편집(이름 + 색상 선택)
- 액션 생성 및 편집(주 N회 / 요일 반복 / 오늘의 도전)
  - 오늘의 도전 액션: 목표 시간(시간/분) 설정 및 반복 요일 선택 가능 (수동 선택)
  - 활성화 기간 설정: 시작 날짜/종료 날짜 선택 가능(선택사항, 설정 시 해당 기간에만 액션 활성화)

### History

- **캘린더 뷰**: 월별 캘린더, 날짜별 달성률(%) 표시(데일리+위클리+오늘의 도전 전체 기준)
- **날짜별 상세 기록**: 선택한 날짜의 기록을 섹션별로 표시
  - 전체 달성률 카드: 오늘의 액션 완료 현황 (완료/목표 수 및 달성률)
  - 이번 주의 꾸준함 테이블: 주간 액션별 체크 현황을 그리드 형태로 표시
  - 카테고리별 달성 현황 그리드: 선택한 날짜가 속한 달 기준으로 카테고리별 달성률 표시
- **스와이프 제스처**: 좌우 스와이프로 날짜 이동, 월 경계 자동 변경

## 데이터 모델(SwiftData, 로컬 저장)

- `PlanYear`: year, goalTitle, categories
- `MandalartCategory`: name, colorKey(색상 키), sortOrder, actions
- `RoutineAction`: name, type(weeklyN/weekdayRepeat/timeBased), weeklyTargetN, repeatWeekdays(bitmask), isActive, startDate(활성화 시작 날짜, 선택), endDate(활성화 종료 날짜, 선택), todayOrder(전역 정렬), categoryOrder(카테고리 내 정렬), timeRecordMode(timer로 고정), timeTargetMinutes, checks, timeSessions
- `ActionCheck`: day(해당 일자 startOfDay), createdAt, action
- `TimeSession`: attributedDay(시작 날짜 기준), durationMinutes, startAt, endAt, isManual(false로 고정), action

## 개발 메모(의도/결정사항)

- 액션에서 "실패 버튼"은 두지 않음: **미기록이 곧 실패(또는 미달성)**로 해석 가능하며, 실패 버튼은 UX를 무겁게 만들 수 있어 MVP에서 제외.
- 위클리의 월간 퍼센트 분모/귀속 같은 복잡한 규칙은 **대시보드 설계 시점에 재정의**.
- iCloud 동기화는 MVP 이후: 현재는 **로컬 저장**으로 시작하고, 이후 CloudKit 동기화를 추가할 예정.
- 단식 기능은 제거되고 **오늘의 도전 액션**으로 통합됨.
- 카테고리는 **이모티콘 대신 색상(colorKey)**으로 구분하며, Today/History에서 색상 동그라미로 표시됨.
- Today 화면의 Edit 모드(드래그 정렬)는 현재 구현되지 않음. `todayOrder` 필드는 존재하나 UI는 추후 추가 예정.
